import { TypeList } from "docs-ui"

# clone

## Parameters

<TypeList types={[{"name":"orchestrator","type":"[TransactionOrchestrator](../../../classes/workflows.TransactionOrchestrator/page.mdx)","description":"TransactionOrchestrator is responsible for managing and executing distributed transactions.\nIt is based on a single transaction definition, which is used to execute all the transaction steps","optional":false,"defaultValue":"","expandable":false,"children":[{"name":"id","type":"`string`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"ROOT_STEP","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"DEFAULT_TTL","type":"`number`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"invokeSteps","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"compensateSteps","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"definition","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"DEFAULT_RETRIES","type":"`number`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"workflowOptions","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"SEPARATOR","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"getPreviousStep","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"getInvokeSteps","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"getCompensationSteps","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"countSiblings","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"canMoveForward","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"canMoveBackward","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"canContinue","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"hasExpired","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"checkTransactionTimeout","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"checkStepTimeout","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"checkAllSteps","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"computeCurrentTransactionState","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"flagStepsToRevert","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"setStepSuccess","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"retryStep","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"skipStep","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"setStepTimeout","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"setStepFailure","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"executeNext","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"finalizeTransaction","type":"`any`","description":"Finalize the transaction when all steps are complete","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"prepareStepForExecution","type":"`any`","description":"Prepare a step for execution by setting state and incrementing attempts","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"createStepPayload","type":"`any`","description":"Create the payload for a step execution","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"prepareHandlerArgs","type":"`any`","description":"Prepare handler arguments for step execution","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"createStepExecutionPromise","type":"`any`","description":"Create the step execution promise with optional tracing","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"executeSyncStep","type":"`any`","description":"Execute a synchronous step and handle its result","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"executeAsyncStep","type":"`any`","description":"Execute an asynchronous step and handle its result","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"handleStepExpiration","type":"`any`","description":"Check if step or transaction has expired and handle timeouts","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"handleStepSuccess","type":"`any`","description":"Handle successful step completion","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"handleStepFailure","type":"`any`","description":"Handle step failure","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"parseFlowOptions","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"createTransactionFlow","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"loadTransactionById","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"getStepByAction","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"getTransactionAndStepFromIdempotencyKey","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"options","type":"`any`","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"traceTransaction","type":"(`transactionResume`: (...`args`: `any`[]) => Promise&#60;void&#62;, `metadata`: ``{ model_id: string ; transaction_id: string ; flow_metadata: undefined \\| &#123; [key: string]: unknown; eventGroupId?: string ; parentIdempotencyKey?: string ; cancelingFromParentStep?: boolean ; sourcePath?: string ; preventReleaseEvents?: boolean ; parentStepIdempotencyKey?: string  &#125;  }``) => Promise&#60;any&#62;","description":"Trace workflow transaction for instrumentation","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"traceStep","type":"(`handler`: (...`args`: `any`[]) => Promise&#60;any&#62;, `metadata`: ``{ action: string ; type: \"invoke\" \\| \"compensate\" ; step_id: string ; step_uuid: string ; attempts: number ; failures: number ; async: boolean ; idempotency_key: string  }``) => Promise&#60;any&#62;","description":"Trace workflow steps for instrumentation","optional":true,"defaultValue":"","expandable":false,"children":[]}]}]} expandUrl="https://docs.medusajs.com/learn/fundamentals/data-models/manage-relationships#retrieve-records-of-relation" sectionTitle="clone"/>

## Returns

<TypeList types={[{"name":"id","type":"`string`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"ROOT_STEP","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"DEFAULT_TTL","type":"`number`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"invokeSteps","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"compensateSteps","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"definition","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"DEFAULT_RETRIES","type":"`number`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"workflowOptions","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"getWorkflowOptions","type":"(`modelId`: `string`) => [TransactionOptions](../../../types/workflows.TransactionOptions/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"constructor","type":"(`__namedParameters`: ``{ id: string ; definition: [TransactionStepsDefinition](../../../types/workflows.TransactionStepsDefinition/page.mdx) ; options?: [TransactionModelOptions](../../../types/workflows.TransactionModelOptions/page.mdx) ; isClone?: boolean  }``) => [TransactionOrchestrator](../../../classes/workflows.TransactionOrchestrator/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"isExpectedError","type":"(`error`: `Error`) => `boolean`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"clone","type":"(`orchestrator`: [TransactionOrchestrator](../../../classes/workflows.TransactionOrchestrator/page.mdx)) => [TransactionOrchestrator](../../../classes/workflows.TransactionOrchestrator/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"SEPARATOR","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"getKeyName","type":"(...`params`: `string`[]) => `string`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"getPreviousStep","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"getOptions","type":"() => [TransactionModelOptions](../../../types/workflows.TransactionModelOptions/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"getInvokeSteps","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"getCompensationSteps","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"countSiblings","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"canMoveForward","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"canMoveBackward","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"canContinue","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"hasExpired","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"checkTransactionTimeout","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"checkStepTimeout","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"checkAllSteps","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"computeCurrentTransactionState","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"flagStepsToRevert","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"setStepSuccess","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"retryStep","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"skipStep","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"setStepTimeout","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"setStepFailure","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"executeNext","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"finalizeTransaction","type":"`any`","description":"Finalize the transaction when all steps are complete","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"prepareStepForExecution","type":"`any`","description":"Prepare a step for execution by setting state and incrementing attempts","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"createStepPayload","type":"`any`","description":"Create the payload for a step execution","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"prepareHandlerArgs","type":"`any`","description":"Prepare handler arguments for step execution","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"createStepExecutionPromise","type":"`any`","description":"Create the step execution promise with optional tracing","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"executeSyncStep","type":"`any`","description":"Execute a synchronous step and handle its result","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"executeAsyncStep","type":"`any`","description":"Execute an asynchronous step and handle its result","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"handleStepExpiration","type":"`any`","description":"Check if step or transaction has expired and handle timeouts","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"handleStepSuccess","type":"`any`","description":"Handle successful step completion","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"handleStepFailure","type":"`any`","description":"Handle step failure","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"resume","type":"(`transaction`: [DistributedTransaction](../../../classes/workflows.DistributedTransaction/page.mdx)) => Promise&#60;void&#62;","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"cancelTransaction","type":"(`transaction`: [DistributedTransaction](../../../classes/workflows.DistributedTransaction/page.mdx), `options?`: ``{ preventExecuteNext?: boolean  }``) => Promise&#60;void&#62;","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"parseFlowOptions","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"createTransactionFlow","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"loadTransactionById","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"buildSteps","type":"(`flow`: [TransactionStepsDefinition](../../../types/workflows.TransactionStepsDefinition/page.mdx), `existingSteps?`: ``{ [key: string]: [TransactionStep](../../../classes/workflows.TransactionStep/page.mdx);  }``) => [``{ [key: string]: [TransactionStep](../../../classes/workflows.TransactionStep/page.mdx);  }``, [StepFeatures](../../../types/workflows.StepFeatures/page.mdx)]","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"beginTransaction","type":"(`__namedParameters`: ``{ transactionId: string ; handler: [TransactionStepHandler](../../../types/workflows.TransactionStepHandler/page.mdx) ; payload?: unknown ; flowMetadata?: &#123; [key: string]: unknown; eventGroupId?: string ; parentIdempotencyKey?: string ; cancelingFromParentStep?: boolean ; sourcePath?: string ; preventReleaseEvents?: boolean ; parentStepIdempotencyKey?: string  &#125; ; context?: [Context](../../../interfaces/workflows.Context/page.mdx) ; onLoad?: (transaction: [DistributedTransaction](../../../classes/workflows.DistributedTransaction/page.mdx)) => void \\| Promise&#60;void&#62;  }``) => Promise&#60;[DistributedTransaction](../../../classes/workflows.DistributedTransaction/page.mdx)&#62;","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"retrieveExistingTransaction","type":"(`transactionId`: `string`, `handler`: [TransactionStepHandler](../../../types/workflows.TransactionStepHandler/page.mdx), `options?`: ``{ isCancelling?: boolean  }``) => Promise&#60;[DistributedTransaction](../../../classes/workflows.DistributedTransaction/page.mdx)&#62;","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"getStepByAction","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"getTransactionAndStepFromIdempotencyKey","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"skipStep","type":"(`__namedParameters`: ``{ responseIdempotencyKey: string ; handler?: [TransactionStepHandler](../../../types/workflows.TransactionStepHandler/page.mdx) ; transaction?: [DistributedTransaction](../../../classes/workflows.DistributedTransaction/page.mdx)  }``) => Promise&#60;[DistributedTransaction](../../../classes/workflows.DistributedTransaction/page.mdx)&#62;","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"retryStep","type":"(`__namedParameters`: ``{ responseIdempotencyKey: string ; handler?: [TransactionStepHandler](../../../types/workflows.TransactionStepHandler/page.mdx) ; transaction?: [DistributedTransaction](../../../classes/workflows.DistributedTransaction/page.mdx) ; onLoad?: (transaction: [DistributedTransaction](../../../classes/workflows.DistributedTransaction/page.mdx)) => void \\| Promise&#60;void&#62;  }``) => Promise&#60;[DistributedTransaction](../../../classes/workflows.DistributedTransaction/page.mdx)&#62;","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"registerStepSuccess","type":"(`__namedParameters`: ``{ responseIdempotencyKey: string ; handler?: [TransactionStepHandler](../../../types/workflows.TransactionStepHandler/page.mdx) ; transaction?: [DistributedTransaction](../../../classes/workflows.DistributedTransaction/page.mdx) ; response?: unknown ; onLoad?: (transaction: [DistributedTransaction](../../../classes/workflows.DistributedTransaction/page.mdx)) => void \\| Promise&#60;void&#62;  }``) => Promise&#60;[DistributedTransaction](../../../classes/workflows.DistributedTransaction/page.mdx)&#62;","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"registerStepFailure","type":"(`__namedParameters`: ``{ responseIdempotencyKey: string ; error?: any ; handler?: [TransactionStepHandler](../../../types/workflows.TransactionStepHandler/page.mdx) ; transaction?: [DistributedTransaction](../../../classes/workflows.DistributedTransaction/page.mdx) ; onLoad?: (transaction: [DistributedTransaction](../../../classes/workflows.DistributedTransaction/page.mdx)) => void \\| Promise&#60;void&#62; ; forcePermanentFailure?: boolean  }``) => Promise&#60;[DistributedTransaction](../../../classes/workflows.DistributedTransaction/page.mdx)&#62;","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"options","type":"`any`","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"traceTransaction","type":"(`transactionResume`: (...`args`: `any`[]) => Promise&#60;void&#62;, `metadata`: ``{ model_id: string ; transaction_id: string ; flow_metadata: undefined \\| &#123; [key: string]: unknown; eventGroupId?: string ; parentIdempotencyKey?: string ; cancelingFromParentStep?: boolean ; sourcePath?: string ; preventReleaseEvents?: boolean ; parentStepIdempotencyKey?: string  &#125;  }``) => Promise&#60;any&#62;","description":"Trace workflow transaction for instrumentation","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"traceStep","type":"(`handler`: (...`args`: `any`[]) => Promise&#60;any&#62;, `metadata`: ``{ action: string ; type: \"invoke\" \\| \"compensate\" ; step_id: string ; step_uuid: string ; attempts: number ; failures: number ; async: boolean ; idempotency_key: string  }``) => Promise&#60;any&#62;","description":"Trace workflow steps for instrumentation","optional":true,"defaultValue":"","expandable":false,"children":[]}]} expandUrl="https://docs.medusajs.com/learn/fundamentals/data-models/manage-relationships#retrieve-records-of-relation" sectionTitle="clone"/>
