---
slug: /references/medusa-workflows/steps/getActionsToComputeFromPromotionsStep
sidebar_label: getActionsToComputeFromPromotionsStep
tags:
  - promotion
  - step
---

import { TypeList, WorkflowDiagram } from "docs-ui"

# getActionsToComputeFromPromotionsStep - Medusa Core Workflows Reference

This documentation provides a reference to the `getActionsToComputeFromPromotionsStep`. It belongs to the `@medusajs/medusa/core-flows` package.

This step retrieves the actions to compute based on the promotions
applied on items and shipping methods.

:::tip

You can use the [retrieveCartStep](../core_flows.Cart.Steps_Cart.retrieveCartStep/page.mdx) to retrieve items and shipping methods' details.

:::

## Example

```ts
const data = getActionsToComputeFromPromotionsStep({
  // retrieve the details of the items and shipping methods from another workflow
  // or in another step using the Cart Module's service
  computeActionContext,
  promotionCodesToApply: ["10OFF"]
})
```

## Input

<TypeList types={[{"name":"GetActionsToComputeFromPromotionsStepInput","type":"[GetActionsToComputeFromPromotionsStepInput](../../../../interfaces/core_flows.GetActionsToComputeFromPromotionsStepInput/page.mdx)","optional":false,"defaultValue":"","description":"The details of the items and shipping methods and its applied promotions.","expandable":false,"children":[{"name":"computeActionContext","type":"[ComputeActionContext](../../../../../promotion/interfaces/promotion.ComputeActionContext/page.mdx)","description":"The items and shipping methods to compute the actions for.","optional":false,"defaultValue":"","expandable":false,"children":[{"name":"currency_code","type":"`string`","description":"The cart's currency","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"email","type":"`string`","description":"The cart's email","optional":true,"defaultValue":"","expandable":false,"children":[],"since":"2.11.0"},{"name":"items","type":"[ComputeActionItemLine](../../../../../promotion/interfaces/promotion.ComputeActionItemLine/page.mdx)[]","description":"The cart's line items.","optional":true,"defaultValue":"","expandable":false,"children":[{"name":"id","type":"`string`","description":"The ID of the item line.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"quantity","type":"[BigNumberInput](../../../../../promotion/types/promotion.BigNumberInput/page.mdx)","description":"The quantity of the line item.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"subtotal","type":"[BigNumberInput](../../../../../promotion/types/promotion.BigNumberInput/page.mdx)","description":"The subtotal of the line item.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"original_total","type":"[BigNumberInput](../../../../../promotion/types/promotion.BigNumberInput/page.mdx)","description":"The total of the line item.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"is_discountable","type":"`boolean`","description":"Whether the line item is discountable.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"adjustments","type":"[ComputeActionAdjustmentLine](../../../../../promotion/interfaces/promotion.ComputeActionAdjustmentLine/page.mdx)[]","description":"The adjustments applied before on the line item.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"product","type":"`object`","description":"The product ID of the line item. Our default promotion rules rely on the product ID to apply the promotion.","optional":true,"defaultValue":"","expandable":false,"children":[]}]},{"name":"shipping_methods","type":"[ComputeActionShippingLine](../../../../../promotion/interfaces/promotion.ComputeActionShippingLine/page.mdx)[]","description":"The cart's shipping methods.","optional":true,"defaultValue":"","expandable":false,"children":[{"name":"id","type":"`string`","description":"The ID of the shipping method.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"subtotal","type":"[BigNumberInput](../../../../../promotion/types/promotion.BigNumberInput/page.mdx)","description":"The subtotal of the shipping method.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"original_total","type":"[BigNumberInput](../../../../../promotion/types/promotion.BigNumberInput/page.mdx)","description":"The total of the shipping method.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"adjustments","type":"[ComputeActionAdjustmentLine](../../../../../promotion/interfaces/promotion.ComputeActionAdjustmentLine/page.mdx)[]","description":"The adjustments applied before on the shipping method.","optional":true,"defaultValue":"","expandable":false,"children":[]}]}]},{"name":"promotionCodesToApply","type":"`string`[]","description":"The promotion codes applied on the items and shipping methods.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"options","type":"`ComputeActionOptions`","description":"The options to configure how the actions are computed.","optional":true,"defaultValue":"","expandable":false,"children":[]}]}]} expandUrl="https://docs.medusajs.com/learn/fundamentals/data-models/manage-relationships#retrieve-records-of-relation" openedLevel={1} sectionTitle="getActionsToComputeFromPromotionsStep"/>

## Output

<TypeList types={[{"name":"(ComputeActions \\| object & AddItemAdjustmentAction & WorkflowDataProperties&#60;ComputeActions&#62; & object \\| never \\| never \\| never \\| never \\| never \\| never \\| object & RemoveItemAdjustmentAction & WorkflowDataProperties&#60;ComputeActions&#62; & object \\| never \\| never \\| never \\| never \\| never \\| never \\| object & AddShippingMethodAdjustment & WorkflowDataProperties&#60;ComputeActions&#62; & object \\| never \\| never \\| never \\| never \\| never \\| never \\| object & RemoveShippingMethodAdjustment & WorkflowDataProperties&#60;ComputeActions&#62; & object \\| never \\| never \\| never \\| never \\| never \\| never \\| object & CampaignBudgetExceededAction & WorkflowDataProperties&#60;ComputeActions&#62; & object \\| never \\| never \\| never \\| never \\| never \\| never \\| object & PromotionLimitExceededAction & WorkflowDataProperties&#60;ComputeActions&#62; & object)[]","type":"([ComputeActions](../../../../../promotion/types/promotion.ComputeActions/page.mdx) \\| `object` & [AddItemAdjustmentAction](../../../../../promotion/interfaces/promotion.AddItemAdjustmentAction/page.mdx) & [WorkflowDataProperties](../../../../../workflows/types/workflows.WorkflowDataProperties/page.mdx)&#60;[ComputeActions](../../../../../promotion/types/promotion.ComputeActions/page.mdx)&#62; & `object` \\| `never` \\| `never` \\| `never` \\| `never` \\| `never` \\| `never` \\| `object` & [RemoveItemAdjustmentAction](../../../../../promotion/interfaces/promotion.RemoveItemAdjustmentAction/page.mdx) & [WorkflowDataProperties](../../../../../workflows/types/workflows.WorkflowDataProperties/page.mdx)&#60;[ComputeActions](../../../../../promotion/types/promotion.ComputeActions/page.mdx)&#62; & `object` \\| `never` \\| `never` \\| `never` \\| `never` \\| `never` \\| `never` \\| `object` & [AddShippingMethodAdjustment](../../../../../promotion/interfaces/promotion.AddShippingMethodAdjustment/page.mdx) & [WorkflowDataProperties](../../../../../workflows/types/workflows.WorkflowDataProperties/page.mdx)&#60;[ComputeActions](../../../../../promotion/types/promotion.ComputeActions/page.mdx)&#62; & `object` \\| `never` \\| `never` \\| `never` \\| `never` \\| `never` \\| `never` \\| `object` & [RemoveShippingMethodAdjustment](../../../../../promotion/interfaces/promotion.RemoveShippingMethodAdjustment/page.mdx) & [WorkflowDataProperties](../../../../../workflows/types/workflows.WorkflowDataProperties/page.mdx)&#60;[ComputeActions](../../../../../promotion/types/promotion.ComputeActions/page.mdx)&#62; & `object` \\| `never` \\| `never` \\| `never` \\| `never` \\| `never` \\| `never` \\| `object` & [CampaignBudgetExceededAction](../../../../../promotion/interfaces/promotion.CampaignBudgetExceededAction/page.mdx) & [WorkflowDataProperties](../../../../../workflows/types/workflows.WorkflowDataProperties/page.mdx)&#60;[ComputeActions](../../../../../promotion/types/promotion.ComputeActions/page.mdx)&#62; & `object` \\| `never` \\| `never` \\| `never` \\| `never` \\| `never` \\| `never` \\| `object` & [PromotionLimitExceededAction](../../../../../promotion/interfaces/promotion.PromotionLimitExceededAction/page.mdx) & [WorkflowDataProperties](../../../../../workflows/types/workflows.WorkflowDataProperties/page.mdx)&#60;[ComputeActions](../../../../../promotion/types/promotion.ComputeActions/page.mdx)&#62; & `object`)[]","optional":false,"defaultValue":"","description":"","expandable":false,"children":[{"name":"ComputeActions \\| object & AddItemAdjustmentAction & WorkflowDataProperties&#60;ComputeActions&#62; & object \\| never \\| never \\| never \\| never \\| never \\| never \\| object & RemoveItemAdjustmentAction & WorkflowDataProperties&#60;ComputeActions&#62; & object \\| never \\| never \\| never \\| never \\| never \\| never \\| object & AddShippingMethodAdjustment & WorkflowDataProperties&#60;ComputeActions&#62; & object \\| never \\| never \\| never \\| never \\| never \\| never \\| object & RemoveShippingMethodAdjustment & WorkflowDataProperties&#60;ComputeActions&#62; & object \\| never \\| never \\| never \\| never \\| never \\| never \\| object & CampaignBudgetExceededAction & WorkflowDataProperties&#60;ComputeActions&#62; & object \\| never \\| never \\| never \\| never \\| never \\| never \\| object & PromotionLimitExceededAction & WorkflowDataProperties&#60;ComputeActions&#62; & object","type":"[ComputeActions](../../../../../promotion/types/promotion.ComputeActions/page.mdx) \\| `object` & [AddItemAdjustmentAction](../../../../../promotion/interfaces/promotion.AddItemAdjustmentAction/page.mdx) & [WorkflowDataProperties](../../../../../workflows/types/workflows.WorkflowDataProperties/page.mdx)&#60;[ComputeActions](../../../../../promotion/types/promotion.ComputeActions/page.mdx)&#62; & `object` \\| `never` \\| `never` \\| `never` \\| `never` \\| `never` \\| `never` \\| `object` & [RemoveItemAdjustmentAction](../../../../../promotion/interfaces/promotion.RemoveItemAdjustmentAction/page.mdx) & [WorkflowDataProperties](../../../../../workflows/types/workflows.WorkflowDataProperties/page.mdx)&#60;[ComputeActions](../../../../../promotion/types/promotion.ComputeActions/page.mdx)&#62; & `object` \\| `never` \\| `never` \\| `never` \\| `never` \\| `never` \\| `never` \\| `object` & [AddShippingMethodAdjustment](../../../../../promotion/interfaces/promotion.AddShippingMethodAdjustment/page.mdx) & [WorkflowDataProperties](../../../../../workflows/types/workflows.WorkflowDataProperties/page.mdx)&#60;[ComputeActions](../../../../../promotion/types/promotion.ComputeActions/page.mdx)&#62; & `object` \\| `never` \\| `never` \\| `never` \\| `never` \\| `never` \\| `never` \\| `object` & [RemoveShippingMethodAdjustment](../../../../../promotion/interfaces/promotion.RemoveShippingMethodAdjustment/page.mdx) & [WorkflowDataProperties](../../../../../workflows/types/workflows.WorkflowDataProperties/page.mdx)&#60;[ComputeActions](../../../../../promotion/types/promotion.ComputeActions/page.mdx)&#62; & `object` \\| `never` \\| `never` \\| `never` \\| `never` \\| `never` \\| `never` \\| `object` & [CampaignBudgetExceededAction](../../../../../promotion/interfaces/promotion.CampaignBudgetExceededAction/page.mdx) & [WorkflowDataProperties](../../../../../workflows/types/workflows.WorkflowDataProperties/page.mdx)&#60;[ComputeActions](../../../../../promotion/types/promotion.ComputeActions/page.mdx)&#62; & `object` \\| `never` \\| `never` \\| `never` \\| `never` \\| `never` \\| `never` \\| `object` & [PromotionLimitExceededAction](../../../../../promotion/interfaces/promotion.PromotionLimitExceededAction/page.mdx) & [WorkflowDataProperties](../../../../../workflows/types/workflows.WorkflowDataProperties/page.mdx)&#60;[ComputeActions](../../../../../promotion/types/promotion.ComputeActions/page.mdx)&#62; & `object`","optional":false,"defaultValue":"","description":"","expandable":false,"children":[]}]}]} expandUrl="https://docs.medusajs.com/learn/fundamentals/data-models/manage-relationships#retrieve-records-of-relation" openedLevel={1} sectionTitle="getActionsToComputeFromPromotionsStep"/>
