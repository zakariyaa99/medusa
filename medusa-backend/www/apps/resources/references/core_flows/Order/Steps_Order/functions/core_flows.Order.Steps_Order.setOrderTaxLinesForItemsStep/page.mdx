---
slug: /references/medusa-workflows/steps/setOrderTaxLinesForItemsStep
sidebar_label: setOrderTaxLinesForItemsStep
tags:
  - order
  - step
---

import { TypeList, WorkflowDiagram } from "docs-ui"

# setOrderTaxLinesForItemsStep - Medusa Core Workflows Reference

This documentation provides a reference to the `setOrderTaxLinesForItemsStep`. It belongs to the `@medusajs/medusa/core-flows` package.

This step sets the tax lines of an order's items and shipping methods.

:::note

You can retrieve an order's details using [Query](https://docs.medusajs.com/learn/fundamentals/module-links/query),
or [useQueryGraphStep](https://docs.medusajs.com/resources/references/medusa-workflows/steps/useQueryGraphStep).

:::

## Example

```ts
const data = setOrderTaxLinesForItemsStep({
  order: {
    id: "order_123",
    // other order details...
  },
  item_tax_lines: [
    {
      line_item_id: "orli_123",
      rate: 0.25,
      code: "VAT",
      name: "VAT",
      provider_id: "tax_provider_123",
    }
  ]
})
```

## Input

<TypeList types={[{"name":"SetOrderTaxLinesForItemsStepInput","type":"[SetOrderTaxLinesForItemsStepInput](../../../../interfaces/core_flows.SetOrderTaxLinesForItemsStepInput/page.mdx)","optional":false,"defaultValue":"","description":"The details of setting tax lines for an order's items and shipping methods.","expandable":false,"children":[{"name":"order","type":"[OrderDTO](../../../../../fulfillment/interfaces/fulfillment.OrderDTO/page.mdx)","description":"The order's details.","optional":false,"defaultValue":"","expandable":false,"children":[{"name":"id","type":"`string`","description":"The ID of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"version","type":"`number`","description":"The version of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"display_id","type":"`number`","description":"The order's display ID.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"status","type":"[OrderStatus](../../../../../fulfillment/types/fulfillment.OrderStatus/page.mdx)","description":"The status of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"currency_code","type":"`string`","description":"The currency of the order","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"created_at","type":"`string` \\| `Date`","description":"When the order was created.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"updated_at","type":"`string` \\| `Date`","description":"When the order was updated.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"original_item_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The original item total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"original_item_subtotal","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The original item subtotal of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"original_item_tax_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The original item tax total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"item_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The item total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"item_subtotal","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The item subtotal of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"item_tax_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The item tax total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"item_discount_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The item discount total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"original_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The original total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"original_subtotal","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The original subtotal of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"original_tax_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The original tax total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"subtotal","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The subtotal of the order. (Excluding taxes)","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"tax_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The tax total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"discount_subtotal","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The discount subtotal of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"discount_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The discount total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"discount_tax_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The discount tax total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"credit_line_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The credit line total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"gift_card_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The gift card total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"gift_card_tax_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The gift card tax total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"shipping_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The shipping total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"shipping_subtotal","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The shipping subtotal of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"shipping_tax_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The shipping tax total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"shipping_discount_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The shipping discount total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"original_shipping_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The original shipping total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"original_shipping_subtotal","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The original shipping subtotal of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"original_shipping_tax_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The original shipping tax total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"custom_display_id","type":"`string`","description":"The order's custom display ID.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"order_change","type":"[OrderChangeDTO](../../../../../fulfillment/interfaces/fulfillment.OrderChangeDTO/page.mdx)","description":"The active order change, if any.","optional":true,"defaultValue":"","expandable":true,"children":[]},{"name":"region_id","type":"`string`","description":"The ID of the region the order belongs to.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"customer_id","type":"`string`","description":"The ID of the customer on the order.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"sales_channel_id","type":"`string`","description":"The ID of the sales channel the order belongs to.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"email","type":"`string`","description":"The email of the order.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"shipping_address","type":"[OrderAddressDTO](../../../../../fulfillment/interfaces/fulfillment.OrderAddressDTO/page.mdx)","description":"The associated shipping address.","optional":true,"defaultValue":"","expandable":true,"children":[]},{"name":"billing_address","type":"[OrderAddressDTO](../../../../../fulfillment/interfaces/fulfillment.OrderAddressDTO/page.mdx)","description":"The associated billing address.","optional":true,"defaultValue":"","expandable":true,"children":[]},{"name":"items","type":"[OrderLineItemDTO](../../../../../fulfillment/interfaces/fulfillment.OrderLineItemDTO/page.mdx)[]","description":"The associated order details / line items.","optional":true,"defaultValue":"","expandable":true,"children":[]},{"name":"shipping_methods","type":"[OrderShippingMethodDTO](../../../../../fulfillment/interfaces/fulfillment.OrderShippingMethodDTO/page.mdx)[]","description":"The associated shipping methods","optional":true,"defaultValue":"","expandable":true,"children":[]},{"name":"transactions","type":"[OrderTransactionDTO](../../../../../fulfillment/interfaces/fulfillment.OrderTransactionDTO/page.mdx)[]","description":"The tramsactions associated with the order","optional":true,"defaultValue":"","expandable":true,"children":[]},{"name":"credit_lines","type":"[OrderCreditLineDTO](../../../../../fulfillment/interfaces/fulfillment.OrderCreditLineDTO/page.mdx)[]","description":"The credit lines for an order","optional":true,"defaultValue":"","expandable":true,"children":[]},{"name":"summary","type":"[OrderSummaryDTO](../../../../../fulfillment/interfaces/fulfillment.OrderSummaryDTO/page.mdx)","description":"The summary of the order totals.","optional":true,"defaultValue":"","expandable":true,"children":[]},{"name":"is_draft_order","type":"`boolean`","description":"Whether the order is a draft order.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"locale","type":"`null` \\| `string`","description":"The locale of the order.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"metadata","type":"`null` \\| `Record<string, unknown>`","description":"Holds custom data in key-value pairs.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"canceled_at","type":"`string` \\| `Date`","description":"When the order was canceled.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"deleted_at","type":"`string` \\| `Date`","description":"When the order was deleted.","optional":true,"defaultValue":"","expandable":false,"children":[]}]},{"name":"item_tax_lines","type":"[ItemTaxLineDTO](../../../../../tax/interfaces/tax.ItemTaxLineDTO/page.mdx)[]","description":"The tax lines to set for the order's items.","optional":false,"defaultValue":"","expandable":false,"children":[{"name":"rate","type":"`number`","description":"The rate of the tax line.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"code","type":"`null` \\| `string`","description":"The code of the tax line.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"name","type":"`string`","description":"The name of the tax line.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"provider_id","type":"`string`","description":"The ID of the tax provider used to calculate and retrieve the tax line.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"line_item_id","type":"`string`","description":"The associated line item's ID.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"rate_id","type":"`string`","description":"The associated rate's ID.\nWhen integrating with a third-party, you don't need to provide it.\nThis is mainly used for the built-in rates.","optional":true,"defaultValue":"","expandable":false,"children":[]}]},{"name":"shipping_tax_lines","type":"[ShippingTaxLineDTO](../../../../../tax/interfaces/tax.ShippingTaxLineDTO/page.mdx)[]","description":"The tax lines to set for the order's shipping methods.","optional":false,"defaultValue":"","expandable":false,"children":[{"name":"rate","type":"`number`","description":"The rate of the tax line.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"code","type":"`null` \\| `string`","description":"The code of the tax line.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"name","type":"`string`","description":"The name of the tax line.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"provider_id","type":"`string`","description":"The ID of the tax provider used to calculate and retrieve the tax line.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"shipping_line_id","type":"`string`","description":"The associated shipping line's ID.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"rate_id","type":"`string`","description":"The associated rate's ID.\nWhen integrating with a third-party, you don't need to provide it.\nThis is mainly used for the built-in rates.","optional":true,"defaultValue":"","expandable":false,"children":[]}]}]}]} expandUrl="https://docs.medusajs.com/learn/fundamentals/data-models/manage-relationships#retrieve-records-of-relation" openedLevel={1} sectionTitle="setOrderTaxLinesForItemsStep"/>
