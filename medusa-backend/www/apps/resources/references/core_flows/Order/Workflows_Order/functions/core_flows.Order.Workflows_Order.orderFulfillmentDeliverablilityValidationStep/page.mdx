---
slug: /references/medusa-workflows/orderFulfillmentDeliverablilityValidationStep
sidebar_label: orderFulfillmentDeliverablilityValidationStep
sidebar_description: ""
tags:
  - step
---

import { TypeList, WorkflowDiagram } from "docs-ui"

# orderFulfillmentDeliverablilityValidationStep - Medusa Core Workflows Reference

This documentation provides a reference to the `orderFulfillmentDeliverablilityValidationStep`. It belongs to the `@medusajs/medusa/core-flows` package.

This step validates that the order fulfillment can be delivered. If the order is cancelled,
the items to mark as delivered don't exist in the order, or the fulfillment doesn't exist in the order,
the step will throw an error.

:::note

You can retrieve an order and fulfillment's details using [Query](https://docs.medusajs.com/learn/fundamentals/module-links/query),
or [useQueryGraphStep](https://docs.medusajs.com/resources/references/medusa-workflows/steps/useQueryGraphStep).

:::

## Example

```ts
const data = orderFulfillmentDeliverablilityValidationStep({
  order: {
    id: "order_123",
    fulfillments: [
      {
        id: "ful_123",
        // other fulfillment details...
      }
    ]
    // other order details...
  },
  fulfillment: {
    id: "ful_123",
    // other fulfillment details...
  }
})
```

## Input

<TypeList types={[{"name":"order","type":"[OrderDTO](../../../../../fulfillment/interfaces/fulfillment.OrderDTO/page.mdx) & `object`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[{"name":"id","type":"`string`","description":"The ID of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"version","type":"`number`","description":"The version of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"display_id","type":"`number`","description":"The order's display ID.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"status","type":"[OrderStatus](../../../../../fulfillment/types/fulfillment.OrderStatus/page.mdx)","description":"The status of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"currency_code","type":"`string`","description":"The currency of the order","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"created_at","type":"`string` \\| `Date`","description":"When the order was created.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"updated_at","type":"`string` \\| `Date`","description":"When the order was updated.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"original_item_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The original item total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"original_item_subtotal","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The original item subtotal of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"original_item_tax_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The original item tax total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"item_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The item total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"item_subtotal","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The item subtotal of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"item_tax_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The item tax total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"item_discount_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The item discount total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"original_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The original total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"original_subtotal","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The original subtotal of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"original_tax_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The original tax total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"subtotal","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The subtotal of the order. (Excluding taxes)","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"tax_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The tax total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"discount_subtotal","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The discount subtotal of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"discount_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The discount total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"discount_tax_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The discount tax total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"credit_line_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The credit line total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"gift_card_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The gift card total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"gift_card_tax_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The gift card tax total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"shipping_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The shipping total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"shipping_subtotal","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The shipping subtotal of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"shipping_tax_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The shipping tax total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"shipping_discount_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The shipping discount total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"original_shipping_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The original shipping total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"original_shipping_subtotal","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The original shipping subtotal of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"original_shipping_tax_total","type":"[BigNumberValue](../../../../../fulfillment/types/fulfillment.BigNumberValue/page.mdx)","description":"The original shipping tax total of the order.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"fulfillments","type":"[FulfillmentDTO](../../../../../fulfillment/interfaces/fulfillment.FulfillmentDTO/page.mdx)[]","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"custom_display_id","type":"`string`","description":"The order's custom display ID.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"order_change","type":"[OrderChangeDTO](../../../../../fulfillment/interfaces/fulfillment.OrderChangeDTO/page.mdx)","description":"The active order change, if any.","optional":true,"defaultValue":"","expandable":true,"children":[]},{"name":"region_id","type":"`string`","description":"The ID of the region the order belongs to.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"customer_id","type":"`string`","description":"The ID of the customer on the order.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"sales_channel_id","type":"`string`","description":"The ID of the sales channel the order belongs to.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"email","type":"`string`","description":"The email of the order.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"shipping_address","type":"[OrderAddressDTO](../../../../../fulfillment/interfaces/fulfillment.OrderAddressDTO/page.mdx)","description":"The associated shipping address.","optional":true,"defaultValue":"","expandable":true,"children":[]},{"name":"billing_address","type":"[OrderAddressDTO](../../../../../fulfillment/interfaces/fulfillment.OrderAddressDTO/page.mdx)","description":"The associated billing address.","optional":true,"defaultValue":"","expandable":true,"children":[]},{"name":"items","type":"[OrderLineItemDTO](../../../../../fulfillment/interfaces/fulfillment.OrderLineItemDTO/page.mdx)[]","description":"The associated order details / line items.","optional":true,"defaultValue":"","expandable":true,"children":[]},{"name":"shipping_methods","type":"[OrderShippingMethodDTO](../../../../../fulfillment/interfaces/fulfillment.OrderShippingMethodDTO/page.mdx)[]","description":"The associated shipping methods","optional":true,"defaultValue":"","expandable":true,"children":[]},{"name":"transactions","type":"[OrderTransactionDTO](../../../../../fulfillment/interfaces/fulfillment.OrderTransactionDTO/page.mdx)[]","description":"The tramsactions associated with the order","optional":true,"defaultValue":"","expandable":true,"children":[]},{"name":"credit_lines","type":"[OrderCreditLineDTO](../../../../../fulfillment/interfaces/fulfillment.OrderCreditLineDTO/page.mdx)[]","description":"The credit lines for an order","optional":true,"defaultValue":"","expandable":true,"children":[]},{"name":"summary","type":"[OrderSummaryDTO](../../../../../fulfillment/interfaces/fulfillment.OrderSummaryDTO/page.mdx)","description":"The summary of the order totals.","optional":true,"defaultValue":"","expandable":true,"children":[]},{"name":"is_draft_order","type":"`boolean`","description":"Whether the order is a draft order.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"locale","type":"`null` \\| `string`","description":"The locale of the order.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"metadata","type":"`null` \\| `Record<string, unknown>`","description":"Holds custom data in key-value pairs.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"canceled_at","type":"`string` \\| `Date`","description":"When the order was canceled.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"deleted_at","type":"`string` \\| `Date`","description":"When the order was deleted.","optional":true,"defaultValue":"","expandable":false,"children":[]}]},{"name":"fulfillment","type":"[FulfillmentDTO](../../../../../fulfillment/interfaces/fulfillment.FulfillmentDTO/page.mdx)","description":"The fulfillment details.","optional":false,"defaultValue":"","expandable":false,"children":[{"name":"id","type":"`string`","description":"The ID of the fulfillment.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"location_id","type":"`string`","description":"The associated location's ID.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"packed_at","type":"`null` \\| `Date`","description":"The date the fulfillment was packed.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"shipped_at","type":"`null` \\| `Date`","description":"The date the fulfillment was shipped.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"delivered_at","type":"`null` \\| `Date`","description":"The date the fulfillment was delivered.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"canceled_at","type":"`null` \\| `Date`","description":"The date the fulfillment was canceled.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"data","type":"`null` \\| `Record<string, unknown>`","description":"The data necessary for the fulfillment provider to process\nthe fulfillment.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"provider_id","type":"`string`","description":"The associated fulfillment provider's ID.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"shipping_option_id","type":"`null` \\| `string`","description":"The associated shipping option's ID.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"metadata","type":"`null` \\| `Record<string, unknown>`","description":"Holds custom data in key-value pairs.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"shipping_option","type":"`null` \\| [ShippingOptionDTO](../../../../../fulfillment/interfaces/fulfillment.ShippingOptionDTO/page.mdx)","description":"The associated shipping option.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"requires_shipping","type":"`boolean`","description":"Flag to indidcate whether shipping is required","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"provider","type":"[FulfillmentProviderDTO](../../../../../fulfillment/interfaces/fulfillment.FulfillmentProviderDTO/page.mdx)","description":"The associated fulfillment provider.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"delivery_address","type":"[FulfillmentAddressDTO](../../../../../fulfillment/interfaces/fulfillment.FulfillmentAddressDTO/page.mdx)","description":"The associated fulfillment address used for delivery.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"items","type":"[FulfillmentItemDTO](../../../../../fulfillment/interfaces/fulfillment.FulfillmentItemDTO/page.mdx)[]","description":"The items of the fulfillment.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"labels","type":"[FulfillmentLabelDTO](../../../../../fulfillment/interfaces/fulfillment.FulfillmentLabelDTO/page.mdx)[]","description":"The labels of the fulfillment.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"created_at","type":"`Date`","description":"The creation date of the fulfillment.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"updated_at","type":"`Date`","description":"The update date of the fulfillment.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"deleted_at","type":"`null` \\| `Date`","description":"The deletion date of the fulfillment.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"marked_shipped_by","type":"`null` \\| `string`","description":"The id of the user that marked fulfillment as shipped","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"created_by","type":"`null` \\| `string`","description":"The id of the user that created the fulfillment","optional":true,"defaultValue":"","expandable":false,"children":[]}]}]} expandUrl="https://docs.medusajs.com/learn/fundamentals/data-models/manage-relationships#retrieve-records-of-relation" openedLevel={1} sectionTitle="orderFulfillmentDeliverablilityValidationStep"/>
