---
slug: /references/medusa-workflows/steps/acquireLockStep
sidebar_label: acquireLockStep
tags:
  - locking
  - step
---

import { TypeList, WorkflowDiagram } from "docs-ui"

# acquireLockStep - Medusa Core Workflows Reference

This documentation provides a reference to the `acquireLockStep`. It belongs to the `@medusajs/medusa/core-flows` package.

This step acquires a lock for a given key. Learn more about locks in the [Locking Module](https://docs.medusajs.com/resources/infrastructure-modules/locking)
guide.

## Example

```ts
const data = acquireLockStep({
  "key": "my-lock-key",
  "ttl": 60
})
```

## Input

<TypeList types={[{"name":"AcquireLockStepInput","type":"[AcquireLockStepInput](../../../../interfaces/core_flows.AcquireLockStepInput/page.mdx)","optional":false,"defaultValue":"","description":"The keys to be locked","expandable":false,"children":[{"name":"key","type":"`string` \\| `string`[]","description":"The keys to be locked","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"timeout","type":"`number`","description":"The maximum time (in seconds) to wait for acquiring the lock. If the lock cannot be acquired within this time, an error is thrown.","optional":true,"defaultValue":"0","expandable":false,"children":[]},{"name":"retryInterval","type":"`number`","description":"The time (in seconds) to wait between each retry to acquire the lock.","optional":true,"defaultValue":"0.3","expandable":false,"children":[]},{"name":"ttl","type":"`number`","description":"The expiration time (in seconds) for the lock. If the lock is already acquired and the owner is the same,\nthe expiration time is extended by the value passed. If not specified, the lock does not expire.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"ownerId","type":"`string`","description":"The owner ID for the lock. If specified, only the owner can release the lock or extend its expiration time.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"provider","type":"`string`","description":"The provider name to use for locking. If no provider is passed, the default provider\n(in-memory or the provider configured in medusa-config.ts) will be used.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"executeOnSubWorkflow","type":"`boolean`","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]}]}]} expandUrl="https://docs.medusajs.com/learn/fundamentals/data-models/manage-relationships#retrieve-records-of-relation" openedLevel={1} sectionTitle="acquireLockStep"/>
